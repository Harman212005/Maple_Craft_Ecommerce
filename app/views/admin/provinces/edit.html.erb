<%= render 'layouts/nav1' %>

<div class="max-w-3xl mx-auto mt-12 p-8 bg-white rounded-2xl shadow-xl border border-gray-200">
  <h1 class="text-3xl font-bold text-gray-800 mb-8 flex items-center gap-2">
    ðŸ’° Edit Tax Rates for 
    <span class="text-indigo-600"><%= @province.name %></span>
  </h1>

  <% if flash[:alert] %>
    <div class="mb-6 p-4 text-sm text-red-800 bg-red-50 border border-red-300 rounded-lg shadow-sm">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <%= form_with(model: [:admin, @province], local: true, class: "space-y-6") do |form| %>
    
    <% if @province.errors.any? %>
      <div class="mb-8 p-5 bg-red-50 border-l-4 border-red-500 rounded-lg shadow-sm">
        <h2 class="font-semibold text-red-700">
          <%= pluralize(@province.errors.count, "error") %> prohibited this province from being saved:
        </h2>
        <ul class="list-disc pl-5 mt-2 text-sm text-red-600 space-y-1">
          <% @province.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <!-- GST -->
    <div class="relative">
      <%= form.number_field :gst, value: number_with_precision(@province.gst, precision: 2), step: 0.01,
          class: "peer w-full border-b-2 border-gray-300 bg-transparent px-3 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-indigo-600 focus:outline-none",
          placeholder: "Enter GST rate" %>
      <%= form.label :gst, 'GST Rate (%)',
          class: "absolute left-3 top-2.5 text-gray-500 text-sm transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-2.5 peer-focus:text-sm peer-focus:text-indigo-600" %>
    </div>

    <!-- PST -->
    <div class="relative">
      <%= form.number_field :pst, value: number_with_precision(@province.pst, precision: 2), step: 0.01,
          class: "peer w-full border-b-2 border-gray-300 bg-transparent px-3 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-indigo-600 focus:outline-none",
          placeholder: "Enter PST rate" %>
      <%= form.label :pst, 'PST Rate (%)',
          class: "absolute left-3 top-2.5 text-gray-500 text-sm transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-2.5 peer-focus:text-sm peer-focus:text-indigo-600" %>
    </div>

    <!-- HST -->
    <div class="relative">
      <%= form.number_field :hst, value: number_with_precision(@province.hst, precision: 2), step: 0.01,
          class: "peer w-full border-b-2 border-gray-300 bg-transparent px-3 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-indigo-600 focus:outline-none",
          placeholder: "Enter HST rate" %>
      <%= form.label :hst, 'HST Rate (%)',
          class: "absolute left-3 top-2.5 text-gray-500 text-sm transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-2.5 peer-focus:text-sm peer-focus:text-indigo-600" %>
    </div>

    <!-- Actions -->
    <div class="flex items-center gap-4 pt-4">
      <%= form.submit 'ðŸ’¾ Update Tax Rates',
          class: "flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-xl shadow-md transform transition hover:scale-[1.02]" %>
      <%= link_to 'Cancel', admin_provinces_path,
          class: "flex-1 text-center bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 rounded-xl shadow-sm transition" %>
    </div>
  <% end %>
</div>
