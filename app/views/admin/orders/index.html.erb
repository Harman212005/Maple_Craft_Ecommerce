<%= render 'layouts/nav1' %>

<div class="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-10 px-6">
  <div class="max-w-7xl mx-auto">
    
    <!-- Page Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8">
      <h1 class="text-4xl font-extrabold text-gray-800 flex items-center gap-2">
        ðŸ“¦ Orders Management
      </h1>
      <span class="text-sm text-gray-500 mt-2 sm:mt-0">
        Total Orders: <span class="font-semibold text-blue-600"><%= @orders.count %></span>
      </span>
    </div>

    <!-- Orders Table -->
    <div class="overflow-x-auto bg-white shadow-2xl rounded-2xl border border-gray-200">
      <table class="min-w-full text-sm text-left text-gray-700">
        <thead class="bg-gradient-to-r from-blue-100 to-indigo-100 border-b">
          <tr>
            <th class="px-6 py-4 font-semibold text-gray-800">ID</th>
            <th class="px-6 py-4 font-semibold text-gray-800">User</th>
            <th class="px-6 py-4 font-semibold text-gray-800">Status</th>
            <th class="px-6 py-4 font-semibold text-gray-800">Total Price</th>
            <th class="px-6 py-4 font-semibold text-gray-800">Created At</th>
            <th class="px-6 py-4 font-semibold text-gray-800">Action</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <% @orders.each do |order| %>
            <tr class="hover:bg-gray-50 transition">
              
              <!-- Order ID -->
              <td class="px-6 py-4 font-medium text-gray-900">
                #<%= order.id %>
              </td>

              <!-- User Info -->
              <td class="px-6 py-4">
                <div class="font-semibold text-gray-800"><%= order.user.username %></div>
                <div class="text-xs text-gray-500"><%= order.user.email %></div>
              </td>

              <!-- Order Status -->
              <td class="px-6 py-4">
                <%= form_with(model: [:admin, order], local: true, data: { turbo: false }, class: "flex items-center space-x-2") do |f| %>
                  <%= f.select :status, Order::STATUSES.map { |s| [s.titleize, s] }, 
                      selected: order.status, 
                      class: "rounded-lg border-gray-300 shadow-sm text-sm focus:ring-indigo-500 focus:border-indigo-500 px-2 py-1" %>
              </td>

              <!-- Total Price -->
              <td class="px-6 py-4 font-bold text-green-600">
                <%= number_to_currency(order.total_price) %>
              </td>

              <!-- Created At -->
              <td class="px-6 py-4 text-gray-600">
                <%= order.created_at.strftime("%b %d, %Y %I:%M %p") %>
              </td>

              <!-- Update Button -->
              <td class="px-6 py-4">
                <%= f.submit "Update", class: "px-4 py-2 bg-indigo-600 text-white text-xs font-medium rounded-lg shadow hover:bg-indigo-700 transition" %>
                <% end %>
              </td>

            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  </div>
</div>
