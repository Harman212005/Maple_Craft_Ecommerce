<%= render 'layouts/nav1' %>

<div class="container mx-auto px-6 py-8">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">ðŸ“¦ All Orders</h1>

  <div class="overflow-x-auto shadow-lg rounded-lg border border-gray-200">
    <table class="min-w-full border-collapse bg-white">
      <thead class="bg-gray-100 border-b">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">ID</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">User</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Status</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Total Price</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Created At</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Update</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
          <tr class="border-b hover:bg-gray-50 transition">
            <td class="px-6 py-4 text-sm text-gray-800"><%= order.id %></td>
            <td class="px-6 py-4 text-sm text-gray-700">
              <span class="font-medium"><%= order.user.username %></span><br>
              <span class="text-xs text-gray-500"><%= order.user.email %></span>
            </td>
            <td class="px-6 py-4">
              <%= form_with(model: [:admin, order], local: true, class: "flex items-center space-x-2") do |f| %>
                <%= f.select :status, Order::STATUSES.map { |s| [s.titleize, s] }, 
                    selected: order.status, 
                    class: "rounded-md border-gray-300 shadow-sm text-sm focus:ring-blue-500 focus:border-blue-500" %>
            </td>
            <td class="px-6 py-4 text-sm font-semibold text-gray-800">
              <%= number_to_currency(order.total_price) %>
            </td>
            <td class="px-6 py-4 text-sm text-gray-600">
              <%= order.created_at.strftime("%Y-%m-%d %H:%M") %>
            </td>
            <td class="px-6 py-4">
                <%= f.submit "Update", class: "px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg shadow hover:bg-blue-700 transition" %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
