<%= render 'layouts/nav2' %>

<div class="max-w-6xl mx-auto px-6 py-10">
  <h1 class="text-3xl font-extrabold text-gray-900 mb-10 border-b pb-4">
    🛒 Your Orders
  </h1>

  <% if @orders.any? %>
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      <% @orders.each do |order| %>
        <div class="bg-white shadow-lg rounded-2xl p-6 border border-gray-100 hover:shadow-xl transition">
          
          <!-- Order Header -->
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold text-gray-800">
              #<%= order.id %>
            </h3>
            <span class="px-3 py-1 text-xs font-medium rounded-full
              <%= case order.status
                    when "pending" then "bg-yellow-100 text-yellow-700"
                    when "shipped" then "bg-blue-100 text-blue-700"
                    when "delivered" then "bg-green-100 text-green-700"
                    else "bg-gray-100 text-gray-600"
                  end %>">
              <%= order.status.capitalize %>
            </span>
          </div>

          <!-- Order Info -->
          <p class="text-sm text-gray-500 mb-2">
            📅 Placed on <%= order.created_at.strftime("%B %d, %Y") %>
          </p>
          <p class="text-lg font-bold text-gray-900 mb-1">
            💰 <%= number_to_currency(order.total_price) %>
          </p>
          <p class="text-sm text-gray-500">
            📦 <%= pluralize(order.order_items.sum(:quantity), 'item') %>
          </p>

          <!-- Order Items Preview -->
          <div class="mt-4 flex -space-x-2">
            <% order.order_items.limit(4).each do |item| %>
              <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-600 border border-white">
                <%= item.quantity %>
              </div>
            <% end %>
            <% if order.order_items.count > 4 %>
              <span class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-300 text-xs font-medium border border-white">
                +<%= order.order_items.count - 4 %>
              </span>
            <% end %>
          </div>

          <!-- Actions -->
          <div class="mt-5 text-right">
            <%= link_to 'View Details', order_path(order), 
                class: "inline-block px-4 py-2 rounded-lg bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700 transition" %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="mt-10 flex justify-center">
      <%= paginate @orders %>
    </div>
  <% else %>
    <!-- Empty State -->
    <div class="bg-white p-10 rounded-2xl shadow text-center">
      <p class="text-gray-500 text-lg mb-6">You haven’t placed any orders yet.</p>
      <%= link_to '🛍️ Continue Shopping', root_path, 
          class: "px-6 py-3 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 shadow-lg transition" %>
    </div>
  <% end %>
</div>
